{% extends "base.html" %} {% load staticfiles %} {% block title %}Tutoria{% endblock %} {% block content %} {% if records is not None %}

<div class="container">
  <div class="row">
    <div class="col-md-11 col-md-offset-1">
      <div class="col-md-11">
        <table class="table table-hover" width="80%">
          <thead>
            <tr>
              <th>#</th>
              {% if user_type == 'Student' %}<th>Tutor</th>{% else %}<th>Student</th>{% endif %}
              <th>Type</th>
              <th>Start time</th>
              <th>End time</th>
              <th>Hourly rate</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {% for record in records %}
            <tr>
              <td>{{forloop.counter}}</td>
              <td>{% if user_type == 'Student' %}
                <img class="img-rounded" width=128px src="{{ record.tutor.avatar.url }}"><br>
                <center>
                  <a href="{% url 'tutor:detail' record.tutor.id %}">{{ record.tutor.first_name }}
                                      {{record.tutor.last_name }}</a>
                </center>{% else %}{{ record.student.first_name }} {{ record.student.last_name }}{% endif %}
              </td>


              <td>
                {% if record.tutor.tutor_type == 'CT' %} Contracted Tutoring {% else %} Private Tutoring {% endif %}
              </td>

              <td>{{record.session.start_time}}</td>
              <td>{{record.session.end_time}}</td>
              <td>{{record.tutor.hourly_rate }}</td>
              {% if user_type == 'Student' %}
              <td> {% if record.status == 'F' %}Finished{% elif record.status == 'C' %}Canceled{% else %}      <form action="{% url 'dashboard:mybookings'%} " method="POST" onsubmit="return confirm('Do you really want to cancel this session?');">
                    {% csrf_token %}
                    <button type="submit" name="booking_id" value={{record.id}}>Cancel</button>
                   </form>
                {% endif %}
              </td>
              {% else %}<td> {% if record.status == 'F' %}Finished{% elif record.status == 'C' %}Canceled{% elif record.status == 'O' %}On-going{% else %}Up-coming{% endif %}</td>
              {% endif %}
            </tr>
            {% empty %}
            <tr>
              <td>No bookings found =(</td>
            </tr>
            {% endfor %}
          </tbody>
          </table>
          {% if id == 'selected' %}<th><center><h2><a href=" {% url 'dashboard:mybookings' %}">Back to view all my bookings</a></h2></center></th> {% endif %}
      </div>
    </div>
  </div>
</div>

{% else %}

<h3> No bookings found. Just relax! </h3> {% endif %} {% endblock %}
